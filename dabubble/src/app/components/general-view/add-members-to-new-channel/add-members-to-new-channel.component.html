<section>
    <header>
        <h3>Leute einladen</h3>
        <div class="close-button" (click)="close()">
            <img src="/img/general-view/workspace-menu/close.svg">
            <img class="d-none" src="/img/general-view/workspace-menu/hover_close.svg">
        </div>
    </header>
    <form class="user-input-container">
        <div class="user-input">
            <!-- <div> -->
            <label>
                <input type="radio" name="members" [(ngModel)]="selectedOption" [value]="true">
                <span>Alle Mitglieder von <b class="purple">OfficeTeam</b> hinzufügen</span>
            </label>
            <!-- </div> -->
            <!-- <div> -->
            <label>
                <input type="radio" name="members" [(ngModel)]="selectedOption" [value]="false">
                <span>Bestimmte Leute hinzufügen</span>
            </label>
        </div>
        <!-- </div> -->
        <div class="input-field-container">
            <div class="input-wrapper" *ngIf="!selectedOption">
                <input class="input-field" placeholder="Namen eingeben" #nameInput [formControl]="searchControl"
                    (focus)="hideSelectedMembers()" (blur)="hideSelectedMembers()" />
                <div class="all-selected-member-container" [ngClass]="{'d-none': searchFocus}">
                    <div class="member-container" *ngFor="let member of selectedMembers | slice:0:2">
                        <!-- <img class="avatar" [src]="'/img/general-view/create-avatar/' + member.avatar +'.svg'"> -->
                        <!-- <img class="avatar" [src]="getAvatarWithCacheBuster(member.avatar)" alt="Member Avatar"> -->
                        <img class="avatar" src="{{ member?.avatar }}" alt="Member Avatar">
                        <span>{{ member.username }}</span>
                        <div class="arrow-back" (click)="removeMember(member)">
                            <img src="/img/general-view/workspace-menu/close.svg">
                        </div>
                    </div>
                    <div (click)="showSelectedMembers()" class="further-members-container"
                        *ngIf="selectedMembers.length > 2">+{{ selectedMembers.length - 2 }}
                    </div>
                </div>
            </div>
            <app-all-members [ngClass]="{'d-none': searchControl.value == '' }"
                [searchQuery]="searchControl.value || ''" (memberClicked)="clearSearchField()">
            </app-all-members>
        </div>
    </form>
    <div class="btn-container">
        <button *ngIf="selectedOption" class="btn-primary--default" (click)="addAllMembersToChannel()">
            Erstellen</button>
        <button *ngIf="!selectedOption" class="btn-primary--default"
            [ngClass]="{'btn-primary--disable': selectedMembers.length <= 0}" type="submit"
            (click)="addSelectedMembersToChannel()">
            Erstellen</button>
    </div>
</section>
<app-all-selected-members *ngIf="openSelectedMembers" [members]="selectedMembers"
    (closeWindow)="closeSelectedMembersWindow()">
</app-all-selected-members>